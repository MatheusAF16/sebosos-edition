<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sebosos Edition ü•µ</title>

<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f2f4f8;
    margin: 0;
    padding: 20px;
    color: #222;
  }

  h1 {
    text-align: center;
    margin-bottom: 10px;
  }

  .controls {
    text-align: center;
    margin-bottom: 20px;
  }

  select {
    padding: 8px;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin: 5px;
  }

  .weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    margin-bottom: 6px;
    text-align: center;
    font-weight: bold;
  }

  .weekdays .sat {
    color: #c62828;
  }

  .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
  }

  .day {
    background: #ffffff;
    border-radius: 12px;
    padding: 8px;
    min-height: 115px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .day.sat {
    background: #fff0f0;
    border: 2px solid #ffb3b3;
  }

  .day.empty {
    background: transparent;
    box-shadow: none;
  }

  .checks {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-top: 6px;
  }

  button {
    border: none;
    border-radius: 6px;
    padding: 6px;
    cursor: pointer;
    font-size: 12px;
    background: #e0e0e0;
  }

  button.active.p1 {
    background: #42a5f5;
    color: #fff;
  }

  button.active.p2 {
    background: #66bb6a;
    color: #fff;
  }

  .summary {
    margin-top: 30px;
    background: #ffffff;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  .players {
    display: flex;
    gap: 20px;
    justify-content: space-around;
    flex-wrap: wrap;
  }

  .player {
    background: #f7f9fc;
    padding: 15px;
    border-radius: 12px;
    width: 260px;
  }

  /* üî• RESPONSIVO (CELULAR) üî• */
  @media (max-width: 768px) {

    body {
      padding: 10px;
    }

    h1 {
      font-size: 22px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    select {
      width: 100%;
      max-width: 160px;
    }

    .weekdays div {
      font-size: 12px;
      padding: 4px;
    }

    .day {
      min-height: 95px;
      padding: 6px;
    }

    .checks button {
      font-size: 11px;
      padding: 5px;
    }

    .players {
      flex-direction: column;
      align-items: center;
    }

    .player {
      width: 100%;
      max-width: 320px;
    }
  }
</style>
</head>

<body>

<h1>üî• Sebosos Edition üî•</h1>

<div class="controls">
  <select id="month"></select>
  <select id="year"></select>
</div>

<div class="weekdays">
  <div>Dom</div><div>Seg</div><div>Ter</div>
  <div>Qua</div><div>Qui</div><div>Sex</div>
  <div class="sat">S√°b</div>
</div>

<div class="calendar" id="calendar"></div>

<div class="summary">
  <h2>üòà Resumo Ca√≥tico</h2>
  <div class="players">
    <div class="player" id="player1"></div>
    <div class="player" id="player2"></div>
  </div>
</div>

<script>
const players = ["Matheus", "Prima"];
const calendarEl = document.getElementById("calendar");
const monthSelect = document.getElementById("month");
const yearSelect = document.getElementById("year");

const data = JSON.parse(localStorage.getItem("sebosos")) || {};

function save() {
  localStorage.setItem("sebosos", JSON.stringify(data));
}

function createSelectors() {
  const months = ["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho",
                  "Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];

  months.forEach((m, i) => {
    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = m;
    monthSelect.appendChild(opt);
  });

  for (let y = 2024; y <= 2030; y++) {
    const opt = document.createElement("option");
    opt.value = y;
    opt.textContent = y;
    yearSelect.appendChild(opt);
  }

  const now = new Date();
  monthSelect.value = now.getMonth();
  yearSelect.value = now.getFullYear();
}

function renderCalendar() {
  calendarEl.innerHTML = "";

  const month = +monthSelect.value;
  const year = +yearSelect.value;

  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();

  for (let i = 0; i < firstDay; i++) {
    calendarEl.appendChild(document.createElement("div")).className = "day empty";
  }

  for (let d = 1; d <= daysInMonth; d++) {
    const date = new Date(year, month, d);
    const dayOfWeek = date.getDay();
    const key = `${year}-${month}-${d}`;

    if (!data[key]) data[key] = [false, false];

    const dayEl = document.createElement("div");
    dayEl.className = "day";
    if (dayOfWeek === 6) dayEl.classList.add("sat");

    dayEl.innerHTML = `<strong>${d}</strong>`;

    const checks = document.createElement("div");
    checks.className = "checks";

    players.forEach((p, i) => {
      const btn = document.createElement("button");
      btn.textContent = p;
      btn.classList.add(`p${i+1}`);
      if (data[key][i]) btn.classList.add("active", `p${i+1}`);

      btn.onclick = () => {
        data[key][i] = !data[key][i];
        save();
        renderCalendar();
        renderSummary();
      };

      checks.appendChild(btn);
    });

    dayEl.appendChild(checks);
    calendarEl.appendChild(dayEl);
  }
}

function getWeekNumber(d) {
  d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
  const dayNum = d.getUTCDay() || 7;
  d.setUTCDate(d.getUTCDate() + 4 - dayNum);
  const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
  return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
}

function renderSummary() {
  players.forEach((p, i) => {
    let treinos = 0;
    let faltas = 0;
    let bonusSabado = 0;
    const weeks = {};

    Object.keys(data).forEach(key => {
      const [y,m,d] = key.split("-").map(Number);
      const date = new Date(y,m,d);
      const week = getWeekNumber(date);
      const day = date.getDay();
      const wKey = `${y}-${week}`;

      if (!weeks[wKey]) weeks[wKey] = { treinos:0, faltas:0, sab:false };

      if (day >= 1 && day <= 5) {
        data[key][i] ? weeks[wKey].treinos++ : weeks[wKey].faltas++;
      }

      if (day === 6 && data[key][i]) weeks[wKey].sab = true;
    });

    Object.values(weeks).forEach(w => {
      treinos += w.treinos;
      if (w.sab) {
        treinos += 1;
        if (w.faltas === 0) bonusSabado++;
      } else {
        faltas += w.faltas;
      }
    });

    document.getElementById(`player${i+1}`).innerHTML = `
      <h3>${p}</h3>
      <p>üèãÔ∏è Treinos v√°lidos: <strong>${treinos}</strong></p>
      <p>üò¥ Faltas n√£o cobertas: <strong>${faltas}</strong></p>
      <p>‚≠ê S√°bados b√¥nus: <strong>${bonusSabado}</strong></p>
      <p>üòà Status: <strong>${faltas > 0 ? "Em risco" : "Seboso exemplar"}</strong></p>
    `;
  });
}

createSelectors();
renderCalendar();
renderSummary();

monthSelect.onchange = () => { renderCalendar(); renderSummary(); };
yearSelect.onchange = () => { renderCalendar(); renderSummary(); };
</script>

</body>
</html>
